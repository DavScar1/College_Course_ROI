<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CollegeROI Ireland | Higher Education Investment Analysis</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Calculate the ROI of Irish university degrees. Compare courses, salaries, and payback periods for UCD, Trinity, DCU, and more. Make smarter education decisions.">
    <meta name="keywords" content="college ROI Ireland, university return on investment, Irish degree salary, course comparison Ireland, CAO, leaving cert">
    
    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="CollegeROI Ireland - Higher Education Investment Analysis">
    <meta property="og:description" content="Make smarter education decisions with real ROI data for 80+ Irish university courses">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    
    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--gray-200);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 16px;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container-wide">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon-wrapper">
                        <svg class="logo-svg" width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <!-- Graduation cap -->
                            <path d="M20 8L4 16L20 24L36 16L20 8Z" fill="#2563eb" stroke="#1e40af" stroke-width="1.5" stroke-linejoin="round"/>
                            <path d="M8 18V26C8 26 12 30 20 30C28 30 32 26 32 26V18" stroke="#2563eb" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M36 16V24" stroke="#1e40af" stroke-width="2" stroke-linecap="round"/>
                            <!-- Upward trend arrow integrated -->
                            <path d="M24 14L28 10L32 14M28 10V18" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <div class="logo-title">CollegeROI</div>
                        <div class="logo-subtitle">Investment Analysis for Irish Students</div>
                    </div>
                </div>
                <nav class="header-nav">
                    <button class="nav-link active" onclick="switchView('calculator')">Calculator</button>
                    <button class="nav-link" onclick="switchView('quiz')">Take A Quiz</button>
                    <button class="nav-link" onclick="switchView('compare')">Compare Courses</button>
                    <button class="nav-link" onclick="switchView('explore')">Browse Courses</button>
                </nav>
            </div>
        </div>
    </header>

    <div class="container-wide">
        <!-- Calculator View -->
        <div id="calculatorView" class="view active">
            <div class="page-header">
                <div>
                    <h1>Calculate Your Return on Investment</h1>
                    <p class="page-description">Analyze your degree choice with real salary data and customizable scenarios</p>
                </div>
            </div>

            

            <div class="grid-layout">
                <!-- Left Column - Inputs -->
                <div class="left-column">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Select Course</h3>
                            <p class="card-description">Choose a degree program to analyze</p>
                        </div>
                        <div class="card-body">
                            <!-- Quick Filters -->
                            <div class="form-group">
                                <label class="form-label">Filter by University</label>
                                <div class="filter-pills">
                                    <button type="button" class="pill active" onclick="showAllCourses()">All</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('UCD')">UCD</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('TCD')">Trinity</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('DCU')">DCU</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('UCC')">UCC</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('Galway')">Galway</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('UL')">UL</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('Maynooth')">Maynooth</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('TU Dublin')">TU Dublin</button>
                                    <button type="button" class="pill" onclick="filterByUniversity('RCSI')">RCSI</button>
                                </div>
                            </div>

                            <!-- Search -->
                            <div class="form-group">
                                <label class="form-label">Search Courses</label>
                                <div class="search-wrapper">
                                    <svg class="search-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                        <path d="M7 13A6 6 0 1 0 7 1a6 6 0 0 0 0 12zM13 13l2.5 2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                    <input type="text" id="courseSearch" class="search-input" placeholder="Type to search..." autocomplete="off">
                                    <button type="button" class="clear-search-btn" id="clearSearch" style="display: none;">Ã—</button>
                                </div>
                                <div id="searchResults" class="search-dropdown" style="display: none;"></div>
                            </div>

                            <!-- Course Selection -->
                            <div class="form-group">
                                <label class="form-label">Available Courses</label>
                                <select id="course" class="form-select" size="5">
                                </select>
                            </div>
                        </div>
                    </div>

                    <button type="button" class="btn-primary" onclick="calculateROI()" style="margin-bottom: 20px;">Calculate ROI</button>

                    <!-- Advanced Options -->
                    <div class="card" style="margin-bottom: 20px;">
                        <div class="card-header collapsible" onclick="toggleSection('advancedOptions')">
                            <h3 class="card-title">Advanced Options</h3>
                            <svg class="expand-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <div id="advancedOptions" class="card-body collapsible-content">
                            <!-- Custom Tuition -->
                            <div class="form-group">
                                <div class="checkbox-wrapper">
                                    <input type="checkbox" id="useCustomTuition" class="checkbox">
                                    <label for="useCustomTuition" class="checkbox-label">Custom tuition amount</label>
                                </div>
                                <div id="customTuitionFields" class="input-reveal" style="display: none;">
                                    <div class="input-group">
                                        <span class="input-prefix">â‚¬</span>
                                        <input type="number" id="customTuition" class="form-input" placeholder="7,000" min="0" step="100">
                                        <span class="input-suffix">per year</span>
                                    </div>
                                    <span class="form-hint">Enter amount after scholarships/grants</span>
                                </div>
                            </div>

                            <!-- Part-time Work -->
                            <div class="form-group">
                                <div class="checkbox-wrapper">
                                    <input type="checkbox" id="enablePartTime" class="checkbox">
                                    <label for="enablePartTime" class="checkbox-label">Part-time employment</label>
                                </div>
                                <div id="partTimeFields" class="input-reveal" style="display: none;">
                                    <div class="slider-group">
                                        <div class="slider-header">
                                            <span class="slider-label">Hours per week</span>
                                            <span class="slider-value" id="hoursDisplay">10</span>
                                        </div>
                                        <input type="range" id="partTimeHours" class="range-slider" min="5" max="25" value="10" step="5">
                                        <div class="slider-labels">
                                            <span>5</span>
                                            <span>25</span>
                                        </div>
                                    </div>

                                    <div class="slider-group">
                                        <div class="slider-header">
                                            <span class="slider-label">Hourly rate</span>
                                            <span class="slider-value">â‚¬<span id="rateDisplay">12.70</span></span>
                                        </div>
                                        <input type="range" id="hourlyRate" class="range-slider" min="12.70" max="25" value="12.70" step="0.50">
                                        <div class="slider-labels">
                                            <span>â‚¬12.70</span>
                                            <span>â‚¬25</span>
                                        </div>
                                    </div>

                                    <div class="info-box">
                                        <div class="info-row">
                                            <span class="info-label">Weekly income</span>
                                            <span class="info-value" id="weeklyIncome">â‚¬0</span>
                                        </div>
                                        <div class="info-row">
                                            <span class="info-label">Annual income</span>
                                            <span class="info-value" id="partTimeIncome">â‚¬0</span>
                                        </div>
                                        <div class="info-row">
                                            <span class="info-label">Total over course</span>
                                            <span class="info-value" id="partTimeTotal">â‚¬0</span>
                                        </div>
                                        <div class="info-highlight">
                                            Cost reduction: <strong id="costReduction">â‚¬0</strong>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="savedPreferencesNotice" class="notice" style="display: none;">
                        <span>Your previous calculation has been restored</span>
                        <button type="button" class="link-btn" onclick="clearSavedPreferences()">Clear</button>
                    </div>
                </div>

                <!-- Right Column - Results -->
                <div class="right-column">
                    <div id="resultsPlaceholder" class="placeholder-state">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                            <rect x="8" y="16" width="48" height="40" rx="4" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="28" x2="32" y2="28" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="36" x2="48" y2="36" stroke="currentColor" stroke-width="2"/>
                            <line x1="16" y1="44" x2="40" y2="44" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <h3>Select a course to view analysis</h3>
                        <p>Choose a course from the list to see detailed ROI calculations, salary projections, and investment analysis</p>
                    </div>

                    <div id="results" style="display: none;">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Quiz View -->
        <div id="quizView" class="view">
            <iframe id="quizFrame" src="/quiz" style="width: 100%; height: 90vh; border: none; border-radius: 12px;"></iframe>
        </div>

        <!-- Compare View -->
        <div id="compareView" class="view">
            <div class="page-header">
                <h1>Compare Multiple Courses</h1>
                <p class="page-description">Select 2-5 courses to compare side-by-side performance metrics</p>
            </div>

            <div class="card">
                <div class="card-body">
                    <div class="form-group">
                        <label class="form-label">Select Courses (2-5)</label>
                        <div class="form-hint" style="margin-bottom: 12px;">Hold Ctrl (Windows) or Cmd (Mac) and click to select multiple</div>
                        <select id="coursesMultiple" class="form-select" multiple style="min-height: 300px;">
                        </select>
                    </div>
                    <button type="button" class="btn-primary" onclick="compareMultipleCourses()">Compare Selected Courses</button>
                </div>
            </div>

            <div id="comparisonResults" style="display: none; margin-top: 32px;"></div>
        </div>

        <!-- Explore View -->
        <div id="exploreView" class="view">
            <div class="page-header">
                <h1>Browse All Courses</h1>
                <p class="page-description">Explore and filter courses by university, field, and performance metrics</p>
            </div>

            <!-- Quick Stats -->
            <div class="stats-grid">
                <div class="stat-card" onclick="showTop5('roi')">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Best ROI</div>
                        <div class="stat-title">Top 5 Returns</div>
                    </div>
                </div>
                
                <div class="stat-card" onclick="showTop5('payback')">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Fastest Payback</div>
                        <div class="stat-title">Quick Recovery</div>
                    </div>
                </div>
                
                <div class="stat-card" onclick="showTop5('cost')">
                    <div class="stat-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M12 6v12M9 9h6M9 15h6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </div>
                    <div class="stat-content">
                        <div class="stat-label">Most Affordable</div>
                        <div class="stat-title">Lowest Cost</div>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="filters-bar">
                <div class="filter-section">
                    <label class="filter-label">University</label>
                    <div class="filter-chips">
                        <label class="chip-checkbox">
                            <input type="checkbox" value="UCD" onchange="applyFilters()">
                            <span>UCD</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="TCD" onchange="applyFilters()">
                            <span>Trinity</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="DCU" onchange="applyFilters()">
                            <span>DCU</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="UCC" onchange="applyFilters()">
                            <span>UCC</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="Galway" onchange="applyFilters()">
                            <span>Galway</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="UL" onchange="applyFilters()">
                            <span>UL</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="Maynooth" onchange="applyFilters()">
                            <span>Maynooth</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="TU Dublin" onchange="applyFilters()">
                            <span>TU Dublin</span>
                        </label>
                        <label class="chip-checkbox">
                            <input type="checkbox" value="RCSI" onchange="applyFilters()">
                            <span>RCSI</span>
                        </label>
                    </div>
                </div>

                <div class="filter-section">
                    <label class="filter-label">Field of Study</label>
                    <div class="filter-chips">
                        <button type="button" class="chip-btn" data-field="Computer Science" onclick="toggleFieldFilter(this)">Computer Science</button>
                        <button type="button" class="chip-btn" data-field="Engineering" onclick="toggleFieldFilter(this)">Engineering</button>
                        <button type="button" class="chip-btn" data-field="Business" onclick="toggleFieldFilter(this)">Business</button>
                        <button type="button" class="chip-btn" data-field="Law" onclick="toggleFieldFilter(this)">Law</button>
                        <button type="button" class="chip-btn" data-field="Medicine" onclick="toggleFieldFilter(this)">Medicine</button>
                        <button type="button" class="chip-btn" data-field="Data" onclick="toggleFieldFilter(this)">Data Science</button>
                        <button type="button" class="chip-btn" data-field="Cybersecurity" onclick="toggleFieldFilter(this)">Cybersecurity</button>
                        <button type="button" class="chip-btn" data-field="Artificial Intelligence" onclick="toggleFieldFilter(this)">AI</button>
                    </div>
                </div>

                <div class="filter-section">
                    <label class="filter-label">Sort by</label>
                    <select id="sortBy" class="sort-select" onchange="applyFilters()">
                        <option value="roi-desc">ROI: High to Low</option>
                        <option value="roi-asc">ROI: Low to High</option>
                        <option value="payback-asc">Payback: Fast to Slow</option>
                        <option value="payback-desc">Payback: Slow to Fast</option>
                        <option value="cost-asc">Cost: Low to High</option>
                        <option value="cost-desc">Cost: High to Low</option>
                        <option value="name">Name: A-Z</option>
                    </select>
                </div>

                <button class="btn-secondary" onclick="resetFilters()">Reset Filters</button>
            </div>

            <!-- Course Grid -->
            <div id="courseGrid" class="course-grid">
                <div class="loading-text">Loading courses...</div>
            </div>

            <div id="noResults" class="empty-state" style="display: none;">
                <svg width="64" height="64" viewBox="0 0 64 64" fill="none">
                    <circle cx="28" cy="28" r="16" stroke="currentColor" stroke-width="2"/>
                    <path d="M40 40l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <path d="M28 20v16M28 36h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h3>No courses found</h3>
                <p>Try adjusting your filters to see more results</p>
            </div>
        </div>
    </div>

    <div id="error" style="display: none;">
        <div class="container-wide">
            <div class="alert alert-error">
                <strong>Error:</strong> <span id="errorMessage"></span>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Keyboard shortcut - Press '/' to focus search
        document.addEventListener('keydown', (e) => {
            if (e.key === '/' && e.target.tagName !== 'INPUT') {
                e.preventDefault();
                document.getElementById('courseSearch').focus();
            }
        });

        // Listen for messages from quiz iframe
        window.addEventListener('message', function(event) {
            if (event.data && event.data.action === 'selectCourse') {
                const calculatorBtn = document.querySelector('.nav-link[onclick*="calculator"]');
                if (calculatorBtn) {
                    calculatorBtn.click();
                }
                
                setTimeout(() => {
                    const courseDropdown = document.getElementById('course');
                    if (courseDropdown) {
                        for (let i = 0; i < courseDropdown.options.length; i++) {
                            if (courseDropdown.options[i].value === event.data.course) {
                                courseDropdown.selectedIndex = i;
                                calculateROI();
                                break;
                            }
                        }
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }
                }, 500);
            }
        }, false);
    </script>
</body>
</html>